
---
title: RTM Quickstart Guide
description: v0.9.0web quickstart 
platform: Web
updatedAt: Mon Apr 22 2019 15:08:02 GMT+0800 (CST)
---
# RTM Quickstart Guide
This page describes how to integrate the Agora RTM Web SDK v0.9.0 and call the basic functionalities provided in the release of v0.9.0.

## Integrate the SDK

### Direct `<script>` Include

Direct `<script`> Include of the Agora Web SDK creates a global variable `AgoraRTM`. To use Direct `<script>` Include:

1. Download the latest Agora RTM Web SDK package.
2. Save the `libs/AgoraRTM-production.js` file in the downloaded package to the corresponding project of your project. 
3. Add to your HTML file the following code and replace `/path/to/agoraRTM-production.js` with an accessible URL address.

```html
<script src="/path/to/agoraRTM-production.js"></script>
```


### Enable IntelliSense and Type Check (optional)

After getting the global `AgoraRTM` object using Direct `<script>` Include, you can call it in the rest of your JavaScript/Typescript code, but you have not enabled IntelliSense.

To enable IntelliSense and type check:

1. Save the `libs/AgoraRTM-global.d.ts` file to the corresponding folder of your project. 
2. Add the following annotation at the beginning of your JavaScript/TypeScript file. 

```JavaScript
/// <reference path="path/to/AgoraRTM-global.d.ts" />
```

3. Replace `path/to/AgoraRTM-global.d.ts` with your corresponding local directory.



## Initialize the Client

### Create an Instance

Before logging in the Agora RTM system, call the `AgoraRTM.createInstance` method to create an `RtmClient` method.

```JavaScript
import AgoraRTM from 'agora-rtm-sdk';
const client = AgoraRTM.createInstance('YourAppId'); 
```
> Only RTM instances with the same App ID can talk to each other.

### Set a listener to the connection state change 

By listening to the `ConnectionStateChange` event on `RtmClient`, you can be notified of state changes in the connection between the SDK and the Agora RTM server. 

```JavaScript
client.on('ConnectionStateChange', (newState, reason) => {
  console.log('on connection state changed to ' + state + ' reason: ' + reason);
});
```

## Login and Logout

### Login to the Agora RTM system

Only after logging in to the Agora RTM system, can a Web application call the messaging functionalites of the Agora RTM system. 

To login to the Agora RTM system, pass an object with the following attributes:
- `token`: You can skip it or set it as null at the stages that do not demand high security, or pass in your token generated by your app server in situations that require high security. 
- `uid`: The User ID has to be a string of less than 64 visible characters. It cannot start off with a space. It cannot be set as null. 

The `login` method returns a Promise. Use the `then` method of this Promise for passing in a callback. Use the `catch` method for catching and handling exceptions. 

```JavaScript
client.login({ token: '<TOKEN>', uid: '<UID>' }).then(() => {
  console.log('AgoraRTM client login success');
}).catch(err => {
  console.log('AgoraRTM client login failure', err);
});
```

> The above sample code uses `then/catch` for passing callbacks and catching exceptions. 
> You can also use `async/await` of ES7 for the asynchronous SDK calls and the synchronous `try/catch` for exception catch. So does the rest of the asychronous APIs of Promise. 

### Logout of the Agora RTM system

To log out of the Agora RTM system, call the `logout` method of `RtmClient`.

```JavaScript
client.logout()
```



## Send or receive peer-to-peer messages

You can send and receive peer-to-peer messages after logging in Agora's RTM server.

### Send a peer-to-peer message

Call the `sendMessageToPeer` method of `client` to send a peer-to-peer message. You need to

- Pass the user ID of the intended receiver.
- Pass an 'RtmMessage` object.

And this method returns a Promise:

- The *resolve* state of this Promise indicates whether the intended receiver receives the message.
- The *reject* state of this Promise indicates:
     - Timeout, or
     - Rejected by the server, or 
     - connection failure.

```JavaScript
client.sendMessageToPeer(
'demoPeerId', // The user ID of the remote user
{ text: 'test peer message' }, // An RtmMessage object.
).then(sendResult => {
if (sendResult.hasPeerReceived) {
/* Your code for handling events that the remote user receives the message. */
} else {
/* Your code for handling events that the message is received by the server but the remote user cannot be reached. */
}
}).catch(error => {
/* Your code for handling events of message send failure. */
});
```

### Receive a peer-to-peer message

Set a listener to the `MessageFromPeer` event on `client` to receive a peer-to-peer message.

```JavaScript
client.on('MessageFromPeer', { text }, peerId) => { // text: text of the received message; peerId: User ID of the sender.
/* Your code for handling events of receiving a peer-to-peer message. */
});
```

## Send or receive channel messages

### Create a channel

The following code snippet shows how to create a channel.

```JavaScript
const channel = client.createChannel('demoChannelName'); // Pass your channel ID here.
```

### Join a channel

The following code snippet shows how to join a channel.  `channel` refers to the newly-created channel instance; each channel ID corresponds to a separate channel instance. Same for the rest.

```JavaScript
channel.join().then(() => {
/* Your code for handling the event of join-channel success. */
}).catch(error => {
/* Your code for handling the event of join-channel failure. */
});
```

### Send a channel message

You can send channel messages after joining a channel.

```JavaScript
channel.sendMessage({ text: 'test channel message' }).then(() => {
/* Your code for handling events such as channel message-send success. */
}).catch(error => {
/* Your code for handling events such as channel message-send failure. */
});
```

### Receive a channel message

```JavaScript
channel.on('ChannelMessage', ({ text }, senderId) => { // text: text of the received channel message; senderId: user ID of the sender.
/* Your code for handling events such as receiving a channel message. */
});
```

### Set a listener to events such as a member joins or leaves the channel.

```JavaScript
channel.on('MemberJoined', memberId => { // memberId: user ID of the user joining the channel
/* Your code for handling events such as a member joins the channel. */
})
```

```JavaScript
channel.on('MemberLeft', memberId => { // memberId: user ID of the user joining the channel.
/* Your code for handling events such as a member leaves the channel. */
})
```


